---
- name: 'Converge'
  hosts: 'acme-ssl-client'
  tasks:
    - include_role:
        name: "{{ lookup('env', 'MOLECULE_PROJECT_DIRECTORY') | basename }}"
  vars:
    acme_ssl_certificates:
      - { domain: 'dns-validated.test.lab', type: 'RSA', challenge: 'dns-01',   dns_zone: 'test.lab',     server: '10.30.50.11' }
      - { domain: 'http-validated.test.lab', challenge: 'http-01',  web_dir: '/var/www/html', server: '10.30.50.11' }

    acme_ssl_directory: 'https://pebble:14000/dir'
    acme_ssl_ca_url: 'https://pebble:14000/root'
    acme_ssl_directory_validate: false
    acme_reload_services: true

    acme_ssl_nameserver: '10.30.50.11'
    acme_ssl_webserver: '10.30.50.11'
